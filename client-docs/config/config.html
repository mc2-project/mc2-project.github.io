<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Azure Configuration" href="azure.html" /><link rel="prev" title="Configuration" href="index.html" />

    <link rel="shortcut icon" href="../../_static/favicon.png"/><meta name="generator" content="sphinx-3.0.3, furo 2021.06.18.beta36"/>
        <title>Global Configuration - MC2 documentation</title>
      <link rel="stylesheet" href="../../_static/styles/furo.css?digest=9b17055c4366e8b2949c66d6a9d8b0efe4dbaa60">
    <link rel="stylesheet" href="../../_static/pygments.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #00B0FF;
  --color-brand-content: #00B0FF;
  --color-admonition-background: orange;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #00B0FF;
  --color-brand-content: #00B0FF;
  --color-admonition-background: orange;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../_static/pygments_dark.css">
    <link rel="stylesheet" href="../../_static/styles/furo-extensions.css?digest=ee12cdd73c4bbac24afec78d92c4afd7c2d8ea7f"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">MC<sup>2</sup>  documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/logo.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">What is MC²?</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../documentation.html">Documentation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">MC² Client</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../opaquesql_usage.html">Usage with Opaque SQL</a></li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="index.html">Configuration</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Global Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="azure.html">Azure Configuration</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../python/index.html">Python Interface</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../python/usage.html">Python Package Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python/api.html">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../cli/index.html">CLI Interface</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../cli/usage.html">CLI Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/api.html">CLI Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../opaque-sql-docs/src/index.html">Opaque SQL</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../opaque-sql-docs/src/install/install.html">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../opaque-sql-docs/src/usage/client.html">Query submission via the MC<sup>2</sup> Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../opaque-sql-docs/src/usage/untrusted.html">Query submission via the Spark Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../opaque-sql-docs/src/usage/usage.html">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../opaque-sql-docs/src/usage/functionality.html">Supported functionalities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../opaque-sql-docs/src/benchmarking/benchmarking.html">Benchmarking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../opaque-sql-docs/src/contributing/contributing.html">Contributing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/mc2-project/mc2">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <section id="global-configuration">
<h1>Global Configuration<a class="headerlink" href="#global-configuration" title="Permalink to this headline">¶</a></h1>
<p id="conf">Before using MC<sup>2</sup> Client, you’ll need to perform some configuration by specifying parameters in a YAML file. An example YAML file can be found <a class="reference external" href="https://github.com/mc2-project/mc2/blob/master/demo/config.yaml">here</a>, and has also been copied at the bottom of this page. We describe the various parameters below.</p>
<section id="user-configuration">
<h2>User Configuration<a class="headerlink" href="#user-configuration" title="Permalink to this headline">¶</a></h2>
<p>We’ll need to perform some configuration for the user in the <code class="docutils literal notranslate"><span class="pre">user</span></code> section of the YAML file. Parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">username</span></code> : your username. This username will be used for certificate generation and authentication purposes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symmetric_key</span></code> : path to your symmetric key. If you don’t yet have a symmetric key, you can ask MC<sup>2</sup> Client to generate a key for you (see <a class="reference internal" href="../cli/usage.html#generating-keys"><span class="std std-ref">Generating Keys</span></a>). MC<sup>2</sup> Client will look to this path for your key when encrypting and decrypting your data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">private_key</span></code> : path to your private key. If you don’t yet have a private key, you can ask MC<sup>2</sup> Client to generate a private key/certificate for you (see <a class="reference internal" href="../cli/usage.html#generating-keys"><span class="std std-ref">Generating Keys</span></a>). MC<sup>2</sup> Client will use your private key to sign messages sent to the cloud.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">certificate</span></code> : path to your certificate. if you don’t yet have a certificate, you can ask MC<sup>2</sup> Client to generate a certificate/private key for you (see <a class="reference internal" href="../cli/usage.html#generating-keys"><span class="std std-ref">Generating Keys</span></a>). MC<sup>2</sup> Client will use your certificate to authenticate you to the cloud.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root_private_key</span></code> : path to the Certificate Authority’s private key. MC<sup>2</sup> Client uses the CA’s private key to generate a certificate for you. The MC<sup>2</sup> compute service should also be aware of the CA private key.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root_certificate</span></code> : path to the Certificate Authority’s certificate. MC<sup>2</sup> Client uses the CA’s certificate to generate a certificate for you. The MC<sup>2</sup> compute service should also be aware of the CA certificate.</p></li>
</ul>
</section>
<section id="launch">
<h2>Launch<a class="headerlink" href="#launch" title="Permalink to this headline">¶</a></h2>
<p>Configuration for launching Azure resources. Parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">azure_config</span></code> : the absolute path to your Azure configuration YAML. More on Azure configuration can be found <a class="reference internal" href="azure.html"><span class="doc">here</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">head</span></code>: manually specify the IP address (<code class="docutils literal notranslate"><span class="pre">ip</span></code>), username (<code class="docutils literal notranslate"><span class="pre">username</span></code>), and absolute path to the SSH key (<code class="docutils literal notranslate"><span class="pre">ssh_key</span></code>) of the head node. If the node is being run locally, only the <code class="docutils literal notranslate"><span class="pre">ip</span></code> field needs to be populated.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This parameter is <strong>optional</strong> and will override <code class="docutils literal notranslate"><span class="pre">azure_config</span></code> - if specified, the user is in charge of launching and stopping their own machines. If left blank, Opaque Client will default to using Azure. <strong>This parameter is for testing/development and should not be used in production.</strong></p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">workers</span></code>: manually specify a list of IP addresses (<code class="docutils literal notranslate"><span class="pre">ip</span></code>), usernames (<code class="docutils literal notranslate"><span class="pre">username</span></code>), and absolute paths to SSH keys (<code class="docutils literal notranslate"><span class="pre">ssh_key</span></code>) corresponding to the worker nodes. If the nodes are being run locally, only the <code class="docutils literal notranslate"><span class="pre">ip</span></code> field needs to be populated.  This field will override <code class="docutils literal notranslate"><span class="pre">azure_config</span></code>. <strong>This parameter is for testing/developement and should not be used in production.</strong></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This parameter is <strong>optional</strong> and will override <code class="docutils literal notranslate"><span class="pre">azure_config</span></code> - if specified, the user is in charge of launching and stopping their own machines. If left blank, Opaque Client will default to using Azure. <strong>This parameter is for testing/development and should not be used in production.</strong></p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code> : a boolean (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>) - whether to launch a cluster of VMs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">storage</span></code> : a boolean (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>) - whether to launch a new Azure blob storage account</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">container</span></code> : a boolean (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>) - whether to launch a storage container</p></li>
</ul>
</section>
<section id="start">
<h2>Start<a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h2>
<p>In this section, you can specify what commands you want to run to start the compute services. Commands will run on the Azure VM cluster that you launch. You can specify different commands for the head node and the worker nodes.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">head</span></code> : a list of commands to run on the cluster’s head node</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workers</span></code> : a list of commands to run on the workers nodes</p></li>
</ul>
</section>
<section id="upload">
<h2>Upload<a class="headerlink" href="#upload" title="Permalink to this headline">¶</a></h2>
<p>In this section, you can specify what data you want to encrypt and upload, how you want to upload the data, and what encryption format you want to use.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">storage</span></code> : options are <code class="docutils literal notranslate"><span class="pre">blob</span></code> or <code class="docutils literal notranslate"><span class="pre">disk</span></code>. If <code class="docutils literal notranslate"><span class="pre">blob</span></code>, MC<sup>2</sup> Client will upload your data to the Azure storage container you create. If <code class="docutils literal notranslate"><span class="pre">disk</span></code>, MC<sup>2</sup> Client will <code class="docutils literal notranslate"><span class="pre">scp</span></code> your data to each launched VM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> : options are <code class="docutils literal notranslate"><span class="pre">xgb</span></code> and <code class="docutils literal notranslate"><span class="pre">sql</span></code>. If <code class="docutils literal notranslate"><span class="pre">xgb</span></code>, MC<sup>2</sup> Client will encrypt your data in a format compatible with Secure XGBoost. If <code class="docutils literal notranslate"><span class="pre">sql</span></code>, MC<sup>2</sup> Client will encrypt your data in a format compatible with Opaque SQL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code> : a list of files to encrypt and upload</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schemas</span></code> : a list of schemas, one for each file you want to encrypt. This field is required if encrypting in <code class="docutils literal notranslate"><span class="pre">sql</span></code> format, and not required otherwise. More detail on the format used to specify the schema is <a class="reference internal" href="../cli/usage.html#sqlformat"><span class="std std-ref">here</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dst</span></code> : the directory to upload the data to. For now, this should be ignored if using Azure blob storage, as blob storage doesn’t support directories.</p></li>
</ul>
</section>
<section id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h2>
<p>In this section, you can specify the script you want to run during computation, as well as some parameters for attestation.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">script</span></code> : the script to run</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compute</span></code> : the compute service you’re using. Options are <code class="docutils literal notranslate"><span class="pre">xgb</span></code> or <code class="docutils literal notranslate"><span class="pre">sql</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">attestation</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">simulation_mode</span></code> : options are <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code>. If <code class="docutils literal notranslate"><span class="pre">0</span></code>, we are not running in simulation mode, and consequently should verify the compute enclaves during attestation. If <code class="docutils literal notranslate"><span class="pre">1</span></code>, we are running in simluation mode, and verification does not occur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mrenclave</span></code> : the hash of the enclave build log.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mrsigner</span></code> : the path to the public key of the entity signing all compute enclaves and the TMS.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">consortium</span></code>: a list of elements in the following format, representing each member of the consortium</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">username</span><span class="p">:</span>
    <span class="nt">public_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/user/public/key</span>
    <span class="nt">release_policy</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nv">true</span><span class="p p-Indicator">,</span><span class="nv">false</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p>In this section, you can specify what you want to download and decrypt, how you want to download the data, and what decryption format you want to use.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">storage</span></code> : options are <code class="docutils literal notranslate"><span class="pre">blob</span></code> or <code class="docutils literal notranslate"><span class="pre">disk</span></code>. If <code class="docutils literal notranslate"><span class="pre">blob</span></code>, MC<sup>2</sup> Client will upload your data to the Azure storage container you create. If <code class="docutils literal notranslate"><span class="pre">disk</span></code>, MC<sup>2</sup> Client will <code class="docutils literal notranslate"><span class="pre">scp</span></code> your data to each launched VM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> : options are <code class="docutils literal notranslate"><span class="pre">xgb</span></code> and <code class="docutils literal notranslate"><span class="pre">sql</span></code>. If <code class="docutils literal notranslate"><span class="pre">xgb</span></code>, MC<sup>2</sup> Client will decrypt your data in a format compatible with Secure XGBoost. If <code class="docutils literal notranslate"><span class="pre">sql</span></code>, MC<sup>2</sup> Client will decrypt your data in a format compatible with Opaque SQL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code> : a list of files to download.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dst</span></code> : the directory to download the data to.</p></li>
</ul>
</section>
<section id="stop">
<h2>Stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h2>
<p>Not implemented</p>
</section>
<section id="teardown">
<h2>Teardown<a class="headerlink" href="#teardown" title="Permalink to this headline">¶</a></h2>
<p>In this section, you can specify what Azure resources you want to terminate that you previously launched.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code> : a boolean (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>) - whether to delete the cluster of VMs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">storage</span></code> : a boolean (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>) - whether to delete the new Azure blob storage account</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">container</span></code> : a boolean (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>) - whether to delete the storage container</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource_group</span></code> : a boolean (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>) - whether to delete the resource group</p></li>
</ul>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>All together, the configuration file will look something like the following.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># User configuration</span>
<span class="nt">user</span><span class="p">:</span>
    <span class="c1"># Your username - username should be specified in certificate</span>
    <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">user1</span>

    <span class="c1"># Path to your symmetric key - will be used for encryption/decryption</span>
    <span class="c1"># If you don't have a symmetric key, specify a path here</span>
    <span class="c1"># and run `mc2 init` to generate a key</span>
    <span class="c1">#</span>
    <span class="c1"># `mc2 init` will not overwrite anything at this path</span>
    <span class="nt">symmetric_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/keys/user1_sym.key</span>

    <span class="c1"># Path to your private key and certificate</span>
    <span class="c1"># If you don't have a private key / certificate, specify paths here</span>
    <span class="c1"># and run `mc2 init` to generate a keypair</span>
    <span class="c1">#</span>
    <span class="c1"># `mc2 init` will not overwrite anything at this path</span>
    <span class="nt">private_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/keys/user1.pem</span>
    <span class="nt">certificate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/keys/user1.crt</span>

    <span class="c1"># Path to CA certificate and private key</span>
    <span class="c1"># Needed if you want to generate a certificate signed by CA</span>
    <span class="nt">root_certificate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/keys/root.crt</span>
    <span class="nt">root_private_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/keys/root.pem</span>

<span class="c1"># Configuration for launching cloud resources</span>
<span class="nt">launch</span><span class="p">:</span>
    <span class="c1"># The absolute path to your Azure configuraton</span>
    <span class="c1"># This needs to be an absolute path</span>
    <span class="nt">azure_config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/azure.yaml</span>

    <span class="c1"># # Manually specify the IP/uname/ssh_key of the head node or workers.</span>
    <span class="c1"># # If these values exist, they will override any values in `azure_config`.</span>
    <span class="c1"># # Consequently, the `launch` and `stop` commands will do nothing.</span>
    <span class="c1"># head:</span>
    <span class="c1">#    ip:</span>
    <span class="c1">#    username:</span>
    <span class="c1">#    ssh_key:</span>
    <span class="c1"># workers:</span>
    <span class="c1">#  - ip:</span>
    <span class="c1">#    username:</span>
    <span class="c1">#    ssh_key:</span>

    <span class="c1"># Whether to launch a cluster of VMs</span>
    <span class="nt">cluster</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

    <span class="c1"># Whether to launch Azure blob storage</span>
    <span class="nt">storage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

    <span class="c1"># Whether to launch a storage container</span>
    <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="c1"># Commands to start compute service</span>
<span class="nt">start</span><span class="p">:</span>
    <span class="c1"># Commands to run on head node</span>
    <span class="nt">head</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">echo "Hello from head"</span>

    <span class="c1"># Commands to run on worker nodes</span>
    <span class="nt">workers</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">echo "Hello from worker"</span>

<span class="c1"># Configuration for `mc2 upload`</span>
<span class="nt">upload</span><span class="p">:</span>
    <span class="c1"># Whether to upload data to Azure blob storage or disk</span>
    <span class="c1"># Allowed values are `blob` or `disk`</span>
    <span class="c1"># If `blob`, Azure CLI will be called to upload data</span>
    <span class="c1"># Else, `scp` will be used</span>
    <span class="nt">storage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">blob</span>

    <span class="c1"># Encryption format to use</span>
    <span class="c1"># Options are `sql` if you want to use Opaque SQL</span>
    <span class="c1"># or `xgb` if you want to use Secure XGBoost</span>
    <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sql</span>

    <span class="c1"># Files to encrypt and upload</span>
    <span class="nt">src</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/data/opaquesql.csv</span>

    <span class="c1"># If you want to run Opaque SQL, you must also specify a schema,</span>
    <span class="c1"># one for each file you want to encrypt and upload</span>
    <span class="nt">schemas</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/data/opaquesql_schema.json</span>

    <span class="c1"># Directory to upload data to</span>
    <span class="nt">dst</span><span class="p">:</span>


<span class="c1"># Computation configuration</span>
<span class="nt">run</span><span class="p">:</span>
    <span class="c1"># Script to run</span>
    <span class="nt">script</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/demo/opaque_sql_demo.scala</span>

    <span class="c1"># Compute service you're using</span>
    <span class="c1"># Choices are `xgb` or `sql`</span>
    <span class="nt">compute</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sql</span>

    <span class="c1"># Attestation configuration</span>
    <span class="nt">attestation</span><span class="p">:</span>
        <span class="c1"># Whether we are running in simulation mode</span>
        <span class="c1"># If 0 (False), we are _not_ running in simulation mode,</span>
        <span class="c1"># and should verify the attestation evidence</span>
        <span class="nt">simulation_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

        <span class="c1"># MRENCLAVE value to check</span>
        <span class="c1"># MRENCLAVE is a hash of the enclave build log</span>
        <span class="nt">mrenclave</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">NULL</span>

        <span class="c1"># Path to MRSIGNER value to check</span>
        <span class="c1"># MRSIGNER is the key used to sign the built enclave</span>
        <span class="nt">mrsigner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${MC2_CLIENT_HOME}/python-package/tests/keys/mc2_test_key.pub</span>

<span class="c1"># Configuration for downloading results</span>
<span class="nt">download</span><span class="p">:</span>
    <span class="c1"># Whether to upload data to Azure blob storage or disk</span>
    <span class="c1"># Allowed values are `blob` or `disk`</span>
    <span class="c1"># If `blob`, Azure CLI will be called to upload data</span>
    <span class="c1"># Else, `scp` will be used</span>
    <span class="nt">storage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">blob</span>

    <span class="c1"># Format this data is encrypted with</span>
    <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sql</span>

    <span class="c1"># Directory/file to download</span>
    <span class="nt">src</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">results/opaque_sql_result</span>

    <span class="c1"># Local directory to download data to</span>
    <span class="nt">dst</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">results/</span>

<span class="c1"># Configuration for stopping services</span>
<span class="nt">stop</span><span class="p">:</span>

<span class="c1"># Configuration for deleting Azure resources</span>
<span class="nt">teardown</span><span class="p">:</span>

    <span class="c1"># Whether to terminate launched VMs</span>
    <span class="nt">cluster</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

    <span class="c1"># Whether to terminate created Azure blob storage</span>
    <span class="nt">storage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

    <span class="c1"># Whether to terminate created storage container</span>
    <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">resource_group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</section>
</section>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="azure.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Azure Configuration</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Configuration</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, MC² Contributors
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../../_sources/client-docs/config/config.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Global Configuration</a><ul>
<li><a class="reference internal" href="#user-configuration">User Configuration</a></li>
<li><a class="reference internal" href="#launch">Launch</a></li>
<li><a class="reference internal" href="#start">Start</a></li>
<li><a class="reference internal" href="#upload">Upload</a></li>
<li><a class="reference internal" href="#run">Run</a></li>
<li><a class="reference internal" href="#download">Download</a></li>
<li><a class="reference internal" href="#stop">Stop</a></li>
<li><a class="reference internal" href="#teardown">Teardown</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>