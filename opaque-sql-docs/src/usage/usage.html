<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Supported functionalities" href="functionality.html" /><link rel="prev" title="Query submission via the MC2 Client" href="client.html" />

    <link rel="shortcut icon" href="../../../_static/favicon.png"/><meta name="generator" content="sphinx-3.0.3, furo 2021.04.11.beta34"/>
        <title>Query submission via the Spark Driver - MC2 documentation</title>
      <link rel="stylesheet" href="../../../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../../../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #00B0FF;
  --color-brand-content: #00B0FF;
  --color-admonition-background: orange;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #00B0FF;
  --color-brand-content: #00B0FF;
  --color-admonition-background: orange;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" href="../../../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">MC<sup>2</sup>  documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../_static/logo.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../documentation.html">Documentation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../client-docs/index.html">MC2 Client</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../client-docs/install.html">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../client-docs/quickstart.html">Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../client-docs/opaquesql_usage.html">Usage with Opaque SQL</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../client-docs/config/index.html">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../client-docs/config/config.html">Global Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../client-docs/config/azure.html">Azure Configuration</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../client-docs/python/index.html">Python Interface</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../client-docs/python/usage.html">Python Package Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../client-docs/python/api.html">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../client-docs/cli/index.html">CLI Interface</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../client-docs/cli/usage.html">CLI Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../client-docs/cli/api.html">CLI Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">Opaque SQL</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../install/install.html">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html">Query submission via the MC<sup>2</sup> Client</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Query submission via the Spark Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="functionality.html">Supported functionalities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../benchmarking/benchmarking.html">Benchmarking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributing.html">Contributing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/mc2-project/mc2">GitHub</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <section id="query-submission-via-the-spark-driver">
<h1>Query submission via the Spark Driver<a class="headerlink" href="#query-submission-via-the-spark-driver" title="Permalink to this headline">¶</a></h1>
<figure class="align-center" id="id1" style="width: 100%">
<img alt="https://mc2-project.github.io/opaque-sql/opaque-diagram.svg" src="https://mc2-project.github.io/opaque-sql/opaque-diagram.svg"/><figcaption>
<p><span class="caption-text">Overview of Opaque SQL running in insecure mode</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="starting-opaque-sql">
<h2>Starting Opaque SQL<a class="headerlink" href="#starting-opaque-sql" title="Permalink to this headline">¶</a></h2>
<p>This page goes through running Opaque SQL with the Spark driver located on the client.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This mode <strong>should not</strong> be used in any context where the full security of hardware enclaves is required. Remote attestation is disabled, and the Spark Driver has access to the key the worker enclaves use to encrypt/decrypt data. This is still offered to play around with the project and explore its API.</p>
<p>This is Opaque SQL in <strong>insecure</strong> mode, and is normally only used for testing functionalities.</p>
</div>
<section id="running-the-interactive-shell">
<h3>Running the interactive shell<a class="headerlink" href="#running-the-interactive-shell" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Package Opaque into a fat JAR. The reason we need a fat JAR is because the JAR produced by <code class="docutils literal notranslate"><span class="pre">build/sbt</span> <span class="pre">package</span></code> does not include gRPC dependencies needed for remote attestion.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">OPAQUE_HOME</span><span class="si">}</span>
build/sbt test:assembly
</pre></div>
</div>
</li>
<li><p>Launch the Spark shell with Opaque.</p>
<p>Scala:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spark-shell --jars <span class="si">${</span><span class="nv">OPAQUE_HOME</span><span class="si">}</span>/target/scala-2.12/opaque-assembly-0.1.jar
</pre></div>
</div>
<p>Python:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyspark --py-files <span class="si">${</span><span class="nv">OPAQUE_HOME</span><span class="si">}</span>/target/scala-2.12/opaque-assembly-0.1.jar  <span class="se">\</span>
  --jars <span class="si">${</span><span class="nv">OPAQUE_HOME</span><span class="si">}</span>/target/scala-2.12/opaque-assembly-0.1.jar
</pre></div>
</div>
<p>(we need to specify <cite>–py-files</cite> because the Python functions are placed in the .jar for easier packaging)</p>
</li>
<li><p>Alternatively, you can also run queries in Scala locally using <code class="docutils literal notranslate"><span class="pre">sbt</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>build/sbt console
</pre></div>
</div>
</li>
<li><p>Inside the Spark shell, import Opaque SQL’s <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> methods and its query planning rules.</p>
<p>Scala:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">edu</span><span class="p">.</span><span class="nn">berkeley</span><span class="p">.</span><span class="nn">cs</span><span class="p">.</span><span class="nn">rise</span><span class="p">.</span><span class="nn">opaque</span><span class="p">.</span><span class="nn">implicits</span><span class="p">.</span><span class="n">_</span>
<span class="n">edu</span><span class="p">.</span><span class="n">berkeley</span><span class="p">.</span><span class="n">cs</span><span class="p">.</span><span class="n">rise</span><span class="p">.</span><span class="n">opaque</span><span class="p">.</span><span class="nc">Utils</span><span class="p">.</span><span class="n">initOpaqueSQL</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="n">testing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
</pre></div>
</div>
<p>Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">opaque_sql</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">init_opaque_sql</span><span class="p">(</span><span class="n">testing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="encrypting-saving-and-loading-a-dataframe">
<h2>Encrypting, saving, and loading a DataFrame<a class="headerlink" href="#encrypting-saving-and-loading-a-dataframe" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Create an unencrypted DataFrame.</p>
<p>Scala:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Seq</span><span class="p">((</span><span class="s">"foo"</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s">"bar"</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">"baz"</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="kd">val</span> <span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="p">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">).</span><span class="n">toDF</span><span class="p">(</span><span class="s">"word"</span><span class="p">,</span> <span class="s">"count"</span><span class="p">)</span>
</pre></div>
</div>
<p>Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">"foo"</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s2">"bar"</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s2">"baz"</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">sqlContext</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">toDF</span><span class="p">(</span><span class="s2">"word"</span><span class="p">,</span> <span class="s2">"count"</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Create an encrypted DataFrame from the unencrypted version. Opaque SQL makes this as easy as calling <code class="docutils literal notranslate"><span class="pre">.encrypted</span></code> (<em>note</em>: this call is only supported in insecure mode).</p>
<p>Scala:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span> <span class="n">dfEncrypted</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">encrypted</span>
</pre></div>
</div>
<p>Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_encrypted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">encrypted</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
<ol class="arabic" id="save-df" start="3">
<li><p>Save the encrypted DataFrame to local disk.
The encrypted data can also be uploaded to cloud storage for easy access.</p>
<p>Scala:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">dfEncrypted</span><span class="p">.</span><span class="n">write</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="s">"edu.berkeley.cs.rise.opaque.EncryptedSource"</span><span class="p">).</span><span class="n">save</span><span class="p">(</span><span class="s">"dfEncrypted"</span><span class="p">)</span>
<span class="c1">// The file dfEncrypted/part-00000 now contains encrypted data</span>
</pre></div>
</div>
<p>Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_encrypted</span><span class="o">.</span><span class="n">write</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"edu.berkeley.cs.rise.opaque.EncryptedSource"</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">"df_encrypted"</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="using-the-dataframe-interface">
<h2>Using the DataFrame interface<a class="headerlink" href="#using-the-dataframe-interface" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Users can load the <a class="reference internal" href="#save-df"><span class="std std-ref">previously persisted encrypted DataFrame</span></a>.</p>
<p>Scala:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">org</span><span class="p">.</span><span class="nn">apache</span><span class="p">.</span><span class="nn">spark</span><span class="p">.</span><span class="nn">sql</span><span class="p">.</span><span class="nn">types</span><span class="p">.</span><span class="n">_</span>
<span class="kd">val</span> <span class="n">dfEncrypted</span> <span class="o">=</span> <span class="p">(</span><span class="n">spark</span><span class="p">.</span><span class="n">read</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="s">"edu.berkeley.cs.rise.opaque.EncryptedSource"</span><span class="p">)</span>
<span class="p">.</span><span class="n">schema</span><span class="p">(</span><span class="nc">StructType</span><span class="p">(</span><span class="nc">Seq</span><span class="p">(</span><span class="nc">StructField</span><span class="p">(</span><span class="s">"word"</span><span class="p">,</span> <span class="nc">StringType</span><span class="p">),</span> <span class="nc">StructField</span><span class="p">(</span><span class="s">"count"</span><span class="p">,</span> <span class="nc">IntegerType</span><span class="p">))))</span>
<span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">"dfEncrypted"</span><span class="p">))</span>
</pre></div>
</div>
<p>Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_encrypted</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"edu.berkeley.cs.rise.opaque.EncryptedSource"</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">"df_encrypted"</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Given an encrypted DataFrame , construct a new query. Users can use <code class="docutils literal notranslate"><span class="pre">explain</span></code> to see the generated query plan.</p>
<p>Scala:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span> <span class="n">result</span> <span class="o">=</span> <span class="n">dfEncrypted</span><span class="p">.</span><span class="n">filter</span><span class="p">(</span><span class="n">$</span><span class="s">"count"</span> <span class="o">&gt;</span> <span class="n">lit</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">result</span><span class="p">.</span><span class="n">explain</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="c1">// [...]</span>
<span class="c1">// == Optimized Logical Plan ==</span>
<span class="c1">// EncryptedFilter (count#6 &gt; 3)</span>
<span class="c1">// +- EncryptedLocalRelation [word#5, count#6]</span>
<span class="c1">// [...]</span>
</pre></div>
</div>
<p>Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">df_encrypted</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">df_encrypted</span><span class="p">[</span><span class="s2">"count"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">result</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p>Call <code class="docutils literal notranslate"><span class="pre">.collect</span></code> or <code class="docutils literal notranslate"><span class="pre">.show</span></code> to retreive and automatically decrypt the results.</p>
</section>
<section id="using-the-sql-interface">
<h2>Using the SQL interface<a class="headerlink" href="#using-the-sql-interface" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Users can also load the <a class="reference internal" href="#save-df"><span class="std std-ref">previously persisted encrypted DataFrame</span></a> using the SQL interface.</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">spark</span><span class="p">.</span><span class="n">sql</span><span class="p">(</span><span class="s">s"""</span>
<span class="s">  |CREATE TEMPORARY VIEW dfEncrypted</span>
<span class="s">  |USING edu.berkeley.cs.rise.opaque.EncryptedSource</span>
<span class="s">  |OPTIONS (</span>
<span class="s">  |  path "dfEncrypted"</span>
<span class="s">  |)"""</span><span class="p">.</span><span class="n">stripMargin</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>The SQL API can be used to run the same query on the loaded data.</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span> <span class="n">result</span> <span class="o">=</span> <span class="n">spark</span><span class="p">.</span><span class="n">sql</span><span class="p">(</span><span class="s">s"""</span>
<span class="s">  |SELECT * FROM dfEncrypted</span>
<span class="s">  |WHERE count &gt; 3"""</span><span class="p">.</span><span class="n">stripMargin</span><span class="p">)</span>
<span class="n">result</span><span class="p">.</span><span class="n">show</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="functionality.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Supported functionalities</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="client.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Query submission via the MC<sup>2</sup> Client</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, MC2 Contributors
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../../../_sources/opaque-sql-docs/src/usage/usage.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Query submission via the Spark Driver</a><ul>
<li><a class="reference internal" href="#starting-opaque-sql">Starting Opaque SQL</a><ul>
<li><a class="reference internal" href="#running-the-interactive-shell">Running the interactive shell</a></li>
</ul>
</li>
<li><a class="reference internal" href="#encrypting-saving-and-loading-a-dataframe">Encrypting, saving, and loading a DataFrame</a></li>
<li><a class="reference internal" href="#using-the-dataframe-interface">Using the DataFrame interface</a></li>
<li><a class="reference internal" href="#using-the-sql-interface">Using the SQL interface</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>